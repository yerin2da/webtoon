<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1화 마녀의 귀환</title>
    <link href="./css/common.css" rel="stylesheet">
    <!-- 폰트어썸 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <!-- jquery-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Swiper -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script src="/js/jquery.easing.1.3.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../css/jquery.booklet.latest.css" />

    <script src="/js/jquery.booklet.latest.js"></script>

</head>
<body>
<div class="wrap">
    <!--헤더-->
    <header>
        <div class="content">
            <!--로고-->
            <h1><a href="#" title="메인페이지로 이동">logo</a></h1>

            <!--제목-->
            <div class="tit_wrap">
                <div class="tit">위치 워치</div>
                <div class="bar">&nbsp;</div>
                <div class="subtit">1화 마녀의 귀환</div>
            </div>

            <!--이전화, 다음화-->
            <div id="episode_btn"></div>

        </div>
        <!--뷰어 설정-->
        <div id="view_setting"></div>
    </header>


    <!--메인-->
    <main>
        <div class="content">
            <!--슬라이드-->
<!--            <div id="slide"></div>-->

            <div id="flip"></div>
        </div>
        <!-- 페이지네이션 -->
        <div class="pagination_wrap">
            <!-- 프로그레스바 -->
            <div class="swiper-pagination-progress"></div>
            <!-- 동그라미 -->
            <div class="swiper-pagination-bullets"></div>
        </div>
        <!-- 네비게이션 -->
        <div class="navigation_wrap">
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        </div>
        <!--오른쪽 메뉴바-->
        <div class="right_menu_wrap">
            <div class="view_setting_btn">
                <img src="./img/view_setting.svg" alt="뷰어설정">
            </div>
            <div class="reset_btn">
                <img src="./img/reset.svg" alt="처음으로 돌아가기">
            </div>
        </div>
    </main>



</div><!--.wrap end-->

<script>
    //이전화, 다음화
    $("#episode_btn").load("episode_btn.html");

    //슬라이드
    $("#slide").load("slide.html");
    // $("#flip").load("flip.html");

    //뷰어설정
    // $("#view_setting").load("view_setting.html");

    <!-- Initialize Swiper -->
    $("#slide").load("slide.html", function() {//slide.html 로딩된 이후 시작
        const progressCircle = document.querySelector(".autoplay-progress svg");
        const progressContent = document.querySelector(".autoplay-progress span");
        var swiper = new Swiper(".mySwiper", {
            spaceBetween: 30,
            effect: "fade",
            centeredSlides: true,
            // autoplay: {
            //     delay: 5000,
            //     disableOnInteraction: false
            // },
            pagination: {
                el: ".swiper-pagination-bullets", // 동그라미
                clickable: true,
                // type: "progressbar",
            },
            keyboard: {
                enabled: true,
            },
            scrollbar: {
                el: ".swiper-scrollbar",
            },
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev"
            },
            on: {
                slideChange: function() {
                    // progressbar 업데이트
                    let progress = ((this.realIndex + 1) / this.slides.length) * 100;
                    document.querySelector(".swiper-pagination-progress").style.width = progress + "%";
                }
            }
        });
    });

    // 플립
    $("#flip").load("flip.html", function() {

        const progressCircle = document.querySelector(".autoplay-progress svg");
        const progressContent = document.querySelector(".autoplay-progress span");
        var swiper = new Swiper(".perspective", {
            // spaceBetween: 30,
            // effect: "card",
            pagination: {
                el: ".swiper-pagination-bullets", // 동그라미
                clickable: true,
                // type: "progressbar",
            },
            coverflowEffect: {
                rotate: 30, // 회전 정도
                stretch: 0,
                depth: 150, // 원근감
                modifier: 1,
                slideShadows: true, // 그림자
            },
            keyboard: {
                enabled: true,
            },
            scrollbar: {
                el: ".swiper-scrollbar",
            },
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev"
            },
            on: {
                slideChange: function() {
                    // progressbar 업데이트
                    let progress = ((this.realIndex + 1) / this.slides.length) * 100;
                    document.querySelector(".swiper-pagination-progress").style.width = progress + "%";
                },
                // slideChangeTransitionStart: function () {
                //     const slides = document.querySelectorAll('.swiper-slide img');
                //     slides.forEach((img, index) => {
                //         if(index === swiper.activeIndex) {
                //             img.style.transform = 'rotateY(-0deg)';      // 현재 슬라이드는 앞쪽
                //         } else if(index < swiper.activeIndex) {
                //             img.style.transform = 'rotateY(-180deg)';   // 이전
                //         } else {
                //             img.style.transform = 'rotateY(-180deg)';    // 다음
                //         }
                //     });
                // },
            }
        });

        $(function () {
            $("#mybook").booklet({
                width: 100 + '%', height: 100 + '%',
                closed: true,
                pageNumbers: false,
                hovers: true,
                // next: "#next_page_button",
                prev:"#prev_page_button",
                hoverWidth: 0,
                arrows: true
            });
            //
            // var next = $(".selector").booklet( "option", "next" );
            // var prev = $(".selector").booklet( "option", "prev" );
            // $(".selector").booklet( "option", "next", "#next_page_button" );
            // $(".selector").booklet( "option", "prev", "#prev_page_button" );

        });
    });

</script>
</body>
</html>